<!DOCTYPE html> <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1.0"> <title>监听计划 - riteme.site</title> <link rel="shortcut icon" href="/favicon.png" type="image/png"> <link rel=stylesheet  href="/styles/material-icons.css"> <link rel=stylesheet  href="/styles/material.min.css" > <link rel=stylesheet  href="/styles/gitment.css"> <link rel=stylesheet  href="/math-renderer/katex/katex.min.css"> <link rel=stylesheet  href="/styles/site.css"> <script src="/scripts/jquery.min.js"></script> <script src="/scripts/js-cookie.js"></script> <script src="/scripts/quicklink.umd.js"></script> <script defer src="/scripts/material.min.js"></script> <script src="/scripts/site.js"></script> <script src="/scripts/gitment.js"></script> <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header"> <header class=mdl-layout__header > <div class=mdl-layout__header-row > <span class=mdl-layout-title >监听计划</span> <div class=mdl-layout-spacer ></div> <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right"> <label class="mdl-button mdl-js-button mdl-button--icon" for=fixed-header-drawer-exp ><i class=material-icons >search</i></label> <div class=mdl-textfield__expandable-holder > <form action="/search.html"><input type=text  class=mdl-textfield__input  placeholder="Search Here" name=q  id=fixed-header-drawer-exp  autocomplete=off  required></form> </div> </div> </div> </header> <div class=mdl-layout__drawer > <span class="mdl-layout-title drawer-title"> <a href="/index.html" style="color: inherit; font-weight: inherit;text-decoration: none;"><img src="/favicon.png" width=32 height=32> riteme.site</a> </span> <nav class=mdl-navigation > <a class=mdl-navigation__link  href="/index.html"><i class="material-icons drawer-icon">home</i> 首页</a> <a class=mdl-navigation__link  href="/posts.html"><i class="material-icons drawer-icon">library_books</i> 所有文章</a> <a class=mdl-navigation__link  href="/about.html"><i class="material-icons drawer-icon">info</i> 关于</a> <a class=mdl-navigation__link  href="/links.html"><i class="material-icons drawer-icon">link</i> 友链</a> <a class=mdl-navigation__link  href="/search.html"><i class="material-icons drawer-icon">search</i> 搜索</a> <a class=mdl-navigation__link  href="https://github.com/riteme/riteme.github.io"><i class="material-icons drawer-icon">class</i> GitHub 项目</a> </nav> </div> <main class=mdl-layout__content > <div class=mdl-grid > <div class="mdl-cell main-cell"> <div class="article main-article" lang=en-US > <h1 id=hnsdfz-7 >监听计划 (HNSDFZ #7)</h1> <h2 id=_1 >题目描述</h2> <p>黑猫警长Lunk最近发现了<tex>$n$</tex>个MHA集团，从<tex>$1$</tex>到<tex>$n$</tex>编号。鉴于MHA集团数量庞大，Lunk需要先对他们进行全面了解后才可以动手。</p> <p>Lunk决定派遣间谍渗入MHA集团的通信网络中来监听他们。MHA集团的通信网络是依靠两两集团之间的通信线路构成的。消息可以通过多条通信线路到达其他集团。Lunk的间谍十分强大，他们也可以通过这些通信线路来监听每一个能到达的集团。</p> <p>然而Lunk是资本家，他不希望花费太多资本用于雇佣间谍。他只想<strong>用最少的间谍来监听所有的MHA集团</strong>。很不幸的是，这些集团间的通信线路质量不好，有一定的寿命，MHA集团每天都会添加一些新的通信线路来确保通信畅通。因此Lunk希望知道每天通信网络稳定后，最少需要多少个间谍才可以监听所有的集团。</p> <h2 id=_2 >实现</h2> <p>本题采用交互式测评。请在<strong>下载</strong>一栏中获取样例交互库。</p> <p>样例交互库包含<code>network.h</code>和<code>implementer.cpp</code>两个文件。选手源程序需要包含<code>network.h</code>这个头文件。</p> <p>你需要实现以下四个函数：</p> <ul> <li><tex>$\text{initialize}(n, \;q)$</tex>：在交互库初始化时会调用该函数，用于初始化你的程序。<ul> <li><tex>$n$</tex>表示MHA集团的数量。 <li><tex>$q$</tex>表示天数，意思是Lunk将只关注第<tex>$1$</tex>到第<tex>$q$</tex>天的情况。 </ul> <li><tex>$\text{add-connection}(u, \;v, \;t)$</tex>：单个数据点中将会被调用<tex>$q$</tex>次，表示每天MHA集团加入的新的通信线路。<ul> <li><tex>$u$</tex>、<tex>$v$</tex>表示在编号为<tex>$u$</tex>和<tex>$v$</tex>的两个MHA集团间架设通信线路。 <li><tex>$t$</tex>表示通信线路的寿命。如果该线路是第<tex>$i$</tex>天加入的，那么这条线路只会在<tex>$[i, \;i + t)$</tex>这段时间内有效。 </ul> <li><tex>$\text{query}()$</tex>：每次调用完<tex>$\text{add-connection}$</tex>之后会被调用，用于回答Lunk的询问。 <li><tex>$\text{finalize}()$</tex>：交互库结束时将调用该函数，用于释放你程序所使用的资源。 </ul> <p><code>network.h</code>中也有对这四个函数的注释文档。</p> <p><code>implementer.cpp</code>是样例交互库。假设你编写的源文件为<code>network.cpp</code>，那么使用以下命令编译：</p> <table class=codehilitetable ><tr><td class=linenos ><div class=linenodiv ><pre>1</pre></div><td class=code ><div class=codehilite ><pre><span></span>g++ implementer.cpp network.cpp -o <span class=nb >exec</span>
</pre></div> </table> <p><code>exec</code>是可执行文件。</p> <h2 id=_3 >输入格式</h2> <p>第一行输入两个正整数<tex>$n$</tex>、<tex>$q$</tex>，表示集团的个数和总共的天数。</p> <p>接下来<tex>$q$</tex>行每行输入三个正整数<tex>$u$</tex>、<tex>$v$</tex>和<tex>$t$</tex>，表示每天通信网络中集团<tex>$u$</tex>和集团<tex>$v$</tex>之间添加了一条寿命为<tex>$t$</tex>的通信网络。</p> <p>最开始MHA集团之间没有通信线路。</p> <h2 id=_4 >输出格式</h2> <p>输出<tex>$q$</tex>行，每行一个正整数，表示每天通信网络<strong>变动完毕后</strong>最少需要派遣的间谍的人数。</p> <h2 id=_5 >样例输入</h2> <table class=codehilitetable ><tr><td class=linenos ><div class=linenodiv ><pre>1
2
3
4
5</pre></div><td class=code ><div class=codehilite ><pre><span></span>4 4
1 2 3
2 3 2
3 4 1
4 4 10086
</pre></div> </table> <h2 id=_6 >样例输出</h2> <table class=codehilitetable ><tr><td class=linenos ><div class=linenodiv ><pre>1
2
3
4</pre></div><td class=code ><div class=codehilite ><pre><span></span>3
2
1
4
</pre></div> </table> <h2 id=_7 >限制</h2> <p>本题共<tex>$10$</tex>个测试点，其限制如下：</p> <table> <thead> <tr> <th align=center >数据编号 <th align=center ><tex>$n$</tex> <th align=center ><tex>$q$</tex> <tr> <td align=center >1 <td align=center ><tex>$10$</tex> <td align=center ><tex>$40$</tex> <tr> <td align=center >2 <td align=center ><tex>$2 \times 10^3$</tex> <td align=center ><tex>$7 \times 10^3$</tex> <tr> <td align=center >3 <td align=center ><tex>$3 \times 10^3$</tex> <td align=center ><tex>$7 \times 10^3$</tex> <tr> <td align=center >4 <td align=center ><tex>$5 \times 10^3$</tex> <td align=center ><tex>$2 \times 10^4$</tex> <tr> <td align=center >5 <td align=center ><tex>$5 \times 10^3$</tex> <td align=center ><tex>$10^5$</tex> <tr> <td align=center >6 <td align=center ><tex>$5 \times 10^3$</tex> <td align=center ><tex>$2 \times 10^5$</tex> <tr> <td align=center >7 <td align=center ><tex>$5 \times 10^3$</tex> <td align=center ><tex>$2 \times 10^5$</tex> <tr> <td align=center >8 <td align=center ><tex>$10^5$</tex> <td align=center ><tex>$10^5$</tex> <tr> <td align=center >9 <td align=center ><tex>$10^5$</tex> <td align=center ><tex>$2 \times 10^5$</tex> <tr> <td align=center >10 <td align=center ><tex>$10^5$</tex> <td align=center ><tex>$2 \times 10^5$</tex> </table> <p>对于所有数据，满足<tex>$1 \leqslant t \leqslant 2 \times 10^5$</tex>。</p> <p><strong>时间限制</strong>：<tex>$1\mathrm{s}$</tex></p> <p><strong>空间限制</strong>：<tex>$512\mathrm{MB}$</tex></p> <p><strong>注意</strong>：交互库本身的运行所用时间不会超过<tex>$0.1\mathrm{s}$</tex>，所用内存不会多于<tex>$32\mathrm{MB}$</tex>。</p> <hr/> <div id=comments ></div> <script> window.addEventListener('load', () => { quicklink(); }); const gitment = new Gitment({id: '309fd0c8b6346a714a3df00ddd1bf659', owner: 'riteme', repo: 'riteme.github.io', oauth: { client_id: 'd4fcffa25858a7a58e1a', client_secret: 'e0c8e08beb95497871f8355416c69390634cec76' }, perPage: 10, }); gitment.render('comments'); </script> </div> </div> <div class="mdl-cell sidebar"> <div class=article > <div class="mdl-card mdl-shadow--2dp sidebar-card"> <div class="mdl-card__actions sidebar-title">页面信息</div> <div class=mdl-card__supporting-text > 标签: <a href="/search.html?q=Problems"><span class=label >Problems</span></a><br/> 创建时间: 2017.01.03<br/> 上次修改: 2017.01.03<br/> 字数统计: 1864 字 / 约 7 分钟 </div> </div> <br/> <div class="mdl-card mdl-shadow--2dp sidebar-card"> <div class="mdl-card__actions sidebar-title">目录</div> <div class=mdl-card__supporting-text > <div class=toc > <ul> <li><a href="#hnsdfz-7">监听计划 (HNSDFZ #7)</a><ul> <li><a href="#_1">题目描述</a> <li><a href="#_2">实现</a> <li><a href="#_3">输入格式</a> <li><a href="#_4">输出格式</a> <li><a href="#_5">样例输入</a> <li><a href="#_6">样例输出</a> <li><a href="#_7">限制</a> </ul> </ul> <ul><li><a href="#comments">评论区</a></ul></div> </div> </div> <br/> <div class="mdl-card mdl-shadow--2dp sidebar-card"> <div class="mdl-card__actions sidebar-title">数学公式渲染</div> <div class=mdl-card__supporting-text > <form name=mathopt > <label class="mdl-radio mdl-js-radio" for=option-1 > <input type=radio  id=option-1  class=mdl-radio__button  name=sel  value=mathjax > <span class=mdl-radio__label >MathJax</span> </label><br/> <label class="mdl-radio mdl-js-radio" for=option-2 > <input type=radio  id=option-2  class=mdl-radio__button  name=sel  value=katex > <span class=mdl-radio__label >KaTeX</span> </label> <div id=tip-1 > <label class="mdl-radio mdl-js-radio" for=option-3 > <input type=radio  id=option-3  class=mdl-radio__button  name=sel  value="katex&mathjax"> <span class=mdl-radio__label >Mixed</span> </label> </div> </form> <div id=tip-2 > <label class="mdl-checkbox mdl-js-checkbox" for=mathopt-align > <input type=checkbox  id=mathopt-align  class=mdl-checkbox__input > <span class=mdl-checkbox__label >居中显示</span> </label> </div> </div> </div> <div class=mdl-tooltip  data-mdl-for=tip-1 >先使用 KaTeX 渲染，再使用 MathJax 渲染</div> <div class=mdl-tooltip  data-mdl-for=tip-2 >该选项目前仅支持 KaTeX 渲染的公式<br/>点击公式可以切换单个公式的对齐方式</div> <br/> <div class="nano mdl-card mdl-shadow--2dp sidebar-card"> <a class=nano-ref  target=_new  href="http://nichijou.wikia.com/wiki/Nano_Shinonome"></a> <div class=mdl-card__actions > <div class=nano-shell ><span class=shell-start >$</span> nano <a href="https://github.com/riteme/riteme.github.io/blob/master/blog/2017-1-3/network.md" id=nano-link >network.md</a></div> </div> </div> <div class=mdl-tooltip  data-mdl-for=nano-link >查看原始 Markdown 文档</div> </div> </div> </div> <footer class=mdl-mega-footer > <div class=mdl-mega-footer__middle-section > <div class=mdl-mega-footer__drop-down-section > <input class=mdl-mega-footer__heading-checkbox  type=checkbox  checked> <h1 class=mdl-mega-footer__heading >RITEME.SITE</h1><del>一个从不乱说话的博客</del> </div> <div class=mdl-mega-footer__drop-down-section > <input class=mdl-mega-footer__heading-checkbox  type=checkbox  checked> <h1 class=mdl-mega-footer__heading >POWERED BY</h1> <ul class=mdl-mega-footer__link-list > <li><a href="http://pythonhosted.org/Markdown/">Python Markdown</a> <li><a href="http://getmdl.io/">Material Design Lite</a> <li><a href="http://www.tipue.com/search/">Tipuesearch</a> <li><a href="http://www.mathjax.org/">MathJax</a> & <a href="http://khan.github.io/KaTeX/">KaTeX</a> <li><a href="https://github.com/imsun/gitment">Gitment</a> </ul> </div> <div class=mdl-mega-footer__drop-down-section > <input class=mdl-mega-footer__heading-checkbox  type=checkbox  checked> <h1 class=mdl-mega-footer__heading >友情链接</h1> <ul class=mdl-mega-footer__link-list > <li><a href="http://ruanx.pw/">ruanxingzhi</a> <li><a href="https://blog.xehoth.cc/">xehoth</a> <li><a href="http://hjwjbsr.is-programmer.com/">HJWJBSR</a> <li><a href="http://www.micdz.cn/">MicDZ</a> <li><a href="https://cmxrynp.github.io/">CMXRYNP</a> <li><a href="http://memset0.cn/">memset0</a> </ul> </div> </div> <div class=mdl-mega-footer__bottom-section >Theme based on <a href="https://getmdl.io/">MDL</a> | Copyright © 2015-2019 riteme. All rights reserved.</div> </footer> </main> </div>