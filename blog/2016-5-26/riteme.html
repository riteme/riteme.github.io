<!DOCTYPE html> <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1.0"> <meta name=referrer  content=no-referrer  /> <title>ZY的核电站 - riteme.site</title> <link rel="shortcut icon" href="/favicon.png" type="image/png"> <link rel=stylesheet  href="/styles/material-icons.css"> <link rel=stylesheet  href="/styles/material.min.css" > <link rel=stylesheet  href="/styles/gitment.css"> <link rel=stylesheet  href="/math-renderer/katex/katex.min.css"> <link rel=stylesheet  href="/styles/site.css"> <script src="/scripts/jquery.min.js"></script> <script src="/scripts/js-cookie.js"></script> <script src="/scripts/quicklink.umd.js"></script> <script defer src="/scripts/material.min.js"></script> <script src="/scripts/site.js"></script> <script src="/scripts/gitment.js"></script> <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header"> <header class=mdl-layout__header > <div class=mdl-layout__header-row > <span class=mdl-layout-title >ZY的核电站</span> <div class=mdl-layout-spacer ></div> <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right"> <label class="mdl-button mdl-js-button mdl-button--icon" for=fixed-header-drawer-exp ><i class=material-icons >search</i></label> <div class=mdl-textfield__expandable-holder > <form action="/search.html"><input type=text  class=mdl-textfield__input  placeholder="Search Here" name=q  id=fixed-header-drawer-exp  autocomplete=off  required></form> </div> </div> </div> </header> <div class=mdl-layout__drawer > <span class="mdl-layout-title drawer-title"> <a href="/index.html" style="color: inherit; font-weight: inherit;text-decoration: none;"><img src="/favicon.png" width=32 height=32> riteme.site</a> </span> <nav class=mdl-navigation > <a class=mdl-navigation__link  href="/index.html"><i class="material-icons drawer-icon">home</i> 首页</a> <a class=mdl-navigation__link  href="/posts.html"><i class="material-icons drawer-icon">library_books</i> 所有文章</a> <a class=mdl-navigation__link  href="/about.html"><i class="material-icons drawer-icon">info</i> 关于</a> <a class=mdl-navigation__link  href="/links.html"><i class="material-icons drawer-icon">link</i> 友链</a> <a class=mdl-navigation__link  href="/search.html"><i class="material-icons drawer-icon">search</i> 搜索</a> <a class=mdl-navigation__link  href="https://github.com/riteme/riteme.github.io"><i class="material-icons drawer-icon">class</i> GitHub 项目</a> </nav> </div> <main class=mdl-layout__content > <div class=mdl-grid > <div class="mdl-cell main-cell"> <div class="article main-article" lang=en-US > <h1 id=zy-nuclearinoutcpp >ZY的核电站 (nuclear.in/out/cpp)</h1> <p>时间限制: 5 s / 内存限制: 256 MB / 打开<code>O2</code>优化</p> <h2 id=_1 >题目描述</h2> <blockquote> <p>&ldquo;ZY喜欢玩核电站。&rdquo;</p> </blockquote> <p>ZY的核电站非常特殊。早在2038年，ZY就发现了高分子有机物的完全裂解可以释放大量的核能的原理（这句话纯属FP）。因此ZY的核电站反应堆里面全是<strong>高分子有机物</strong>，可惜<strong>只有一个</strong>。<br /> 为了使发电量尽可能大，ZY找到了一种能使有机物完全裂解的方式，使释放出来的能量最大。由于这是ZY的有机物，因此裂解方式也非常奇葩。下面是ZY在2039年的论文《论ZY对MC<sup id="fnref:mc"><a class=footnote-ref  href="#fn:mc" rel=footnote >1</a></sup>核电站的巨大贡献》中的节选片段：</p> <blockquote> <p>......<br /> 我们的有机物是由<tex>$n$</tex>个各种原子构成的，原子之间通过不同的共价键相连。<br /> <img alt=zy-chem  src="https://riteme.site/blogimg/self-test-2016-5/zy-chem.png" /><br /> (<tex>$\text{H}$</tex>太多了，到时候这些没用的氢原子都会<strong>被ZY丢掉</strong>)<br /> ......<br /> 为了方便进行裂解，这个有机物是<strong>没有环</strong>的，这样就可以节约成本来买**V*P***......<br /> ......<br /> 每次裂解都会<strong>断开一个共价键</strong>，此时这个有机物会<strong>分为两部分</strong>。并且释放大量的能量......<br /> 设放出的能量为<tex>$E$</tex>，有机物裂解后的两部分的共价键的集合分别为<tex>$A$</tex>和<tex>$B$</tex>，则：、<br /> <tex>$$ E = \sum_{a\in A} a.\text{energy} \cdot \sum_{b\in B} b.\text{energy} \tag{ZY's energy theorem}$$</tex></p> <p>其中<tex>$\text{energy}$</tex>表示共价键的能量。<br /> ......<br /> 为了充分利用有机物中的能量，每裂解一个共价键后，我们有办法<strong>无损耗无成本</strong>的将其还原，即有机物会变得和裂解前一样。但是出于种种原因，这个共价键就<strong>不能再次进行裂解</strong>了。除非ZY发出<strong>SB之神力</strong>来使所有的共价键复活......<br /> ......<br /> 那么，一个有机物完全裂解所能放出的能量为<strong>所有共价键裂解一次后所放出的能量之和</strong>。<br /> ......</p> </blockquote> <p>(实际上，ZY的这篇论文长达<tex>$2147483647$</tex>字)</p> <p>当然，ZY的智商理论上为<tex>$-\infty$</tex>。因此它的核电站其实<strong>非常辣鸡</strong>。反应堆中的有机物不一定是稳定的，但是ZY利用LCT算法以<tex>$O(\infty!)$</tex>的时间复杂度内成功地<strong>保证了有机物的结构</strong>，这样就方便ZY发出<strong>SB之神力</strong>。但是令ZY想跳楼的是，总有一个共价键的能量在维护有机物结构时会<strong>变动</strong>。然而&rdquo;机智&rdquo;的ZY可以发现这些变化。<br /> ZY只希望能够快速<strong>算出</strong>当前的有机物通过<strong>完全裂解</strong>究竟能放出多少能量。由于ZY的数学只有学前班水平，所以每当<strong>她</strong>算到一半时，这个有机物又开始乱搞了，ZY就只能用LCT来重新维护它。<br /> 一年之内，ZY的核电站什么电都没有发。为了快速计算，ZY找到了你这个**。<br /> ZY希望你能给出一个好方法来帮助<strong>她</strong>计算<strong>当前有机物</strong>完全裂解能放出的能量。</p> <h2 id=_2 >输入格式</h2> <p>第<tex>$1$</tex>行输入两个正整数<tex>$n$</tex>，<tex>$m$</tex>。<tex>$n$</tex>表示有机物中原子的数量，<tex>$m$</tex>表示ZY维护有机物结构的次数。<br /> 接下来<tex>$n - 1$</tex>行描述一个有机物。对于每一行输入三个整数<tex>$u$</tex>，<tex>$v$</tex>和<tex>$e$</tex>，表示第<tex>$u$</tex>号原子和第<tex>$v$</tex>号原子之间以能量为<tex>$e$</tex>的共价键相连。<br /> 接下来<tex>$m$</tex>行，每一行描述一个共价键的键能变化。每行输入三个整数<tex>$u$</tex>，<tex>$v$</tex>和<tex>$e$</tex>，表示第<tex>$u$</tex>号原子和第<tex>$v$</tex>号原子之间的共价键的能量变为<tex>$e$</tex>。保证第<tex>$u$</tex>号原子和第<tex>$v$</tex>号原子之间存在共价键。</p> <h2 id=_3 >输出格式</h2> <p>对于每次共价键能量的变动，输出一行一个整数，表示<strong>键能改变后</strong>的有机物完全裂解能放出的能量。</p> <h2 id=_4 >输入样例</h2> <table class=codehilitetable ><tr><td class=linenos ><div class=linenodiv ><pre><span class=normal > 1</span>
<span class=normal > 2</span>
<span class=normal > 3</span>
<span class=normal > 4</span>
<span class=normal > 5</span>
<span class=normal > 6</span>
<span class=normal > 7</span>
<span class=normal > 8</span>
<span class=normal > 9</span>
<span class=normal >10</span>
<span class=normal >11</span>
<span class=normal >12</span></pre></div><td class=code ><div class=codehilite ><pre><span></span>7 4
1 2 2
1 7 1
2 3 2
2 6 1
3 4 1
3 5 1

1 2 2
1 2 3
2 3 3
1 2 0
</pre></div> </table> <h2 id=_5 >输出样例</h2> <table class=codehilitetable ><tr><td class=linenos ><div class=linenodiv ><pre><span class=normal >1</span>
<span class=normal >2</span>
<span class=normal >3</span>
<span class=normal >4</span></pre></div><td class=code ><div class=codehilite ><pre><span></span>13
15
16
10
</pre></div> </table> <h2 id=_6 >数据范围及提示</h2> <p>对于第一个询问:<br /> 裂解<tex>$1$</tex>和<tex>$2$</tex>之间的共价键: <tex>$1 \times (2 + 1 + 1 + 1) = 5$</tex><br /> 裂解<tex>$2$</tex>和<tex>$3$</tex>之间的共价键: <tex>$(2 + 1 + 1) \times (1 + 1) = 8$</tex><br /> 其余的共价键裂解得到的能量均为<tex>$0$</tex>。<br /> 因此答案为<tex>$13$</tex>。</p> <p>对于<tex>$10\%$</tex>的数据: <tex>$n \le 1,000, \; m \le 5,000$</tex><br /> 对于<tex>$10\%$</tex>的数据: <tex>$n \le 10,000, \; m \le 500,000$</tex><br /> 对于<tex>$10\%$</tex>的数据: <tex>$n \le 100,000, \; m \le 100$</tex><br /> 对于<tex>$10\%$</tex>的数据: <tex>$n \le 10,000, \; m \le 1,000,000$</tex><br /> 对于另外<tex>$20\%$</tex>的数据: <strong>有机物没有支链</strong>。<br /> 对于<tex>$100\%$</tex>的数据: <tex>$n \le 200,000, \; m \le 1,000,000, \; e \le 10 $</tex></p> <div class=footnote > <hr /> <ol> <li id="fn:mc"> <p>ZY从不打摆。&#160;<a class=footnote-backref  href="#fnref:mc" rev=footnote  title="Jump back to footnote 1 in the text">&#8617;</a></p> </ol> </div> <hr/> <div id=comments ></div> <script> window.addEventListener('load', () => { quicklink(); }); const gitment = new Gitment({id: 'c186581dfd9d90ec4813fb69b8955f96', owner: 'riteme', repo: 'riteme.github.io', oauth: { client_id: 'd4fcffa25858a7a58e1a', client_secret: 'e0c8e08beb95497871f8355416c69390634cec76' }, perPage: 10, }); gitment.render('comments'); </script> </div> </div> <div class="mdl-cell sidebar"> <div class=article > <div class="mdl-card mdl-shadow--2dp sidebar-card"> <div class="mdl-card__actions sidebar-title">页面信息</div> <div class=mdl-card__supporting-text > 标签: <a href="/search.html?q=Problems"><span class=label >Problems</span></a> <a href="/search.html?q=ZY"><span class=label >ZY</span></a><br/> 创建时间: 2016.05.26<br/> 上次修改: 2016.05.26<br/> 字数统计: 2138 字 / 约 8 分钟 </div> </div> <br/> <div class="mdl-card mdl-shadow--2dp sidebar-card"> <div class="mdl-card__actions sidebar-title">数学公式渲染</div> <div class=mdl-card__supporting-text > <form name=mathopt > <label class="mdl-radio mdl-js-radio" for=option-1 > <input type=radio  id=option-1  class=mdl-radio__button  name=sel  value=mathjax > <span class=mdl-radio__label >MathJax</span> </label><br/> <label class="mdl-radio mdl-js-radio" for=option-2 > <input type=radio  id=option-2  class=mdl-radio__button  name=sel  value=katex > <span class=mdl-radio__label >KaTeX</span> </label> <div id=tip-1 > <label class="mdl-radio mdl-js-radio" for=option-3 > <input type=radio  id=option-3  class=mdl-radio__button  name=sel  value="katex&mathjax"> <span class=mdl-radio__label >Mixed</span> </label> </div> </form> <div id=tip-2 > <label class="mdl-checkbox mdl-js-checkbox" for=mathopt-align > <input type=checkbox  id=mathopt-align  class=mdl-checkbox__input > <span class=mdl-checkbox__label >居中显示</span> </label> </div> </div> </div> <div class=mdl-tooltip  data-mdl-for=tip-1 >先使用 KaTeX 渲染，再使用 MathJax 渲染</div> <div class=mdl-tooltip  data-mdl-for=tip-2 >该选项目前仅支持 KaTeX 渲染的公式<br/>点击公式可以切换单个公式的对齐方式</div> <br/> <div class="nano mdl-card mdl-shadow--2dp sidebar-card"> <div class=mdl-card__actions > <div class=nano-shell ><span class=shell-start >$</span> nano <a href="https://github.com/riteme/riteme.github.io/blob/master/blog/2016-5-26/riteme.md" id=nano-link >riteme.md</a></div> </div> </div> <div class=mdl-tooltip  data-mdl-for=nano-link >查看原始 Markdown 文档</div> </div> </div> </div> <footer class=mdl-mega-footer > <div class=mdl-mega-footer__middle-section > <div class=mdl-mega-footer__drop-down-section > <input class=mdl-mega-footer__heading-checkbox  type=checkbox  checked> <h2 class=mdl-mega-footer__heading >RITEME.SITE</h2><del>一个从不乱说话的博客</del> </div> <div class=mdl-mega-footer__drop-down-section > <input class=mdl-mega-footer__heading-checkbox  type=checkbox  checked> <h2 class=mdl-mega-footer__heading >POWERED BY</h2> <ul class=mdl-mega-footer__link-list > <li><a href="http://pythonhosted.org/Markdown/">Python Markdown</a> <li><a href="http://getmdl.io/">Material Design Lite</a> <li><a href="http://www.tipue.com/search/">Tipuesearch</a> <li><a href="http://www.mathjax.org/">MathJax</a> & <a href="http://khan.github.io/KaTeX/">KaTeX</a> <li><a href="https://github.com/imsun/gitment">Gitment</a> </ul> </div> <div class=mdl-mega-footer__drop-down-section > <input class=mdl-mega-footer__heading-checkbox  type=checkbox  checked> <h2 class=mdl-mega-footer__heading >友情链接</h2> <ul class=mdl-mega-footer__link-list > <li><a href="http://ruanx.pw/">ruanxingzhi</a> <li><a href="https://blog.xehoth.cc/">xehoth</a> <li><a href="http://hjwjbsr.is-programmer.com/">HJWJBSR</a> <li><a href="http://www.micdz.cn/">MicDZ</a> <li><a href="https://cmxrynp.github.io/">CMXRYNP</a> <li><a href="http://memset0.cn/">memset0</a> </ul> </div> </div> <div class=mdl-mega-footer__bottom-section >Theme based on <a href="https://getmdl.io/">MDL</a> | <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" class=cc  src="/assets/cc-by-nc-sa-4.png" /></a> CC BY-NC-SA 4.0 </div> </footer> </main> </div>